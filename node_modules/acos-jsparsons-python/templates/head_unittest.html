<script> 
  $(document).ready(function(){
      
    var unittests = '{{unittests}}';
    
    parson = new ParsonsWidget({
      "sortableId": "sortable",
      "trashId": "sortableTrash",
      "unittests":unittests,
      "toggleTypeHandlers": {ab: ["<", ">"]}
    });
      
    parson.init('{{initial}}');
    parson.shuffleLines();
    
    $("#newInstanceLink").click(function(event){
       event.preventDefault();
       parson.shuffleLines();
    });
    
    $("#feedbackLink").click(function(event){

      event.preventDefault();
      var fb = parson.getFeedback();
      parsonsGrade(fb);
      $("#unittest").html("<h2>Feedback from testing your program:</h2>" + fb.feedback);
      if (fb.success) { alert("Good, you solved the assignment!"); }
    });

  });
</script>